# ADF Tutorial, Part 2: Creating The UI

The UI shall consist of a dialog for showing and finding employees based on: Jobs, Departments and free text search. 
The left pane should be an accordion with several tabs one for each type.
The center pane should be a filterable list which shall display a photo for each employee.
Finally a status pane on the right shall show contact details for selected employee.
The table shall have a toolbar to allow us to edit and create new users.

## 1.1 Creating the page.

Start by creating the base page for locating employees.

Keyword   | Value
----------|----------------------
Page type | Facelets
Page name | employees.jsf
Template  | Oracle Three column

Next add the accordion to the left and add three panes to it:

1. Departments
2. Jobs
3. Search

### Questions:

1. How can we add things to the various panes in the accordion?
2. Whats the difference between a jsf and a jsff page?
3. How can we customize the template (for instance add a logo)

## 1.2 Add a "ADF Tree" based on the DepartmentsView object.

Keyword   | Value
----------|------------------------------------
Fields    | DepartmentName, FirstName, LastName

Show DepartmentName and FirstName + LastName attributes in the tree.

### Hint
 
* Data Controls are found in a separate tab in the Application view.
* Dont forget to add a second node to the TreeBinding (+)
* Drag the data source to where on the page you want it.

## 1.3 Add a "ADF Tree" based on the AllJobsView object.

Keyword   | Value
----------|------------------------------------
Fields    | JobTitle, FirstName, LastName

Show JobTitle and FirstName + LastName attributes in the tree.

### Hint

## 1.4 Add a "ADF Table" based on the EmployeesView object.

Keyword   | Value
----------|------------------------------------------
Fields    | Gravatar, FirstName, LastName, Email
Selection | Single row
Filtered  | Checked
Sortable  | Checked
Read-only | Checked

Show only Gravatar, FirstName, LastName and Email.
Make sure we can select only single rows in the table.
Also enable sorting and filtering as well as make it a read-only table.

## 1.5 Add a "ADF Form" based on the EmployeesView object.

Keyword   | Value
----------|------------------------------------------------------
Fields    | Gravatar, FirstName, LastName, + All contanct details
Selection | Single row
Read-only | Checked

Show only Gravatar, FirstName, LastName and Email.
Make sure we can select only single rows in the table.
Also enable sorting and filtering as well as make it a read-only table.

## 1.6 Add logic to make this dialog work as expected.

This involves syncronizing the various iterators as well as setting up ppr to work correctly.

### Hints

* Edit the various trees and set the employee level "target data source" to point to the ${bindings.EmployeesViewIterator}
* Make sure you setup the various employees objects (table/form) to listen to events from all trees (see PartialTrigger option)
 

## 2.1 Add ability to edit employees.

Keyword     | Value
------------|------------------------------------------------------
Task Flow   | edit-exmployees.xml
Flags       | Bounded, NOT fragments
Transaction | Begin new
Outcomes    | save (for commit) and cancel (for rollback)
View name   | edit.jsf

Since this is an administrative application we want tohave the ability to edit the employees. To best resiolve this we want to create a flow for managing users. Initial (in this iteration) we will create a flow for editing users. Later we will add the ability to add/delete users. Please note that we will need transactions for this so we can rollback any changes if we click cancel.

### Hints

* Create a bounded task flow (make sure you unselect "with Page framgnets").
* The taskflow should start wihth the edit page and end with either a commit action or a rollback action
* Actions can be dragged from the data control
* Set the "Always begin new" transaction flag on the "Overview _> Behavior" tab

## Add edit button

Create routing between the two dialogs and add toolbar buttons to the employee table to allow editing the currently selected user.

### Hints:

* To connect the view we need to update the controller and add routing between the views.
* The controller for our application is an unbounded taskflow. Which is where we need to add our routing.
* Best way to add a toolbar is to right click the table and select "surround with".
* The same strategy can be used to add the button but instead ad them inside the toolbar.

## 2.2 Add edit employee form

Add a form which allows us to edit the current employee. The form should also have save/cancel buttons which connect to the task flow actions for the same. The view should use the same three pane template as before.
The content of the page should be a simple form and two buttons.

### Hints:

* Double click the view to create/edit it.
* Drag dataobject as before.
* Dont forget to remove the transient fileds (gravtar, etc)
* You can add commit/rollback buttons by clicking the "submit" option in the form dialog.
* Connect buttons with outcomes by setting the action on the button.
 
## 2.3 Add routing between views.

Keyword      | Value
-------------|------------------------------------------------------
Outcomes     | save (for commit) and cancel (for rollback)

The last thing we need to add before we can start using our form is routing between the forms. To do this we need to add routing rules between our views on the unbounded task flow which represents the controller and allows us to navigate between pages.

### Hints:

* The default unbounded taskflow is called adfc-config.xml
* Drag the employees view and the task flow (notice that the second view cannot be run independently) to this task flow.
* Dont forget to add a return action
* Since we already have commit and rollback we can rollback the global transaction (or commit it)

## 2.4 Add routing between views.

Keyword      | Value
-------------|------------------------------------------------------
Components   | Panel Collection, Button
Action       | editEmployee
Title        | Edit

The last thing we shall do in this iteration is add the edit button to the emaployees view.

### Hints:

* Surround the table with a "Panel Collection"
* Add a toolbar with a button to the new toolbar facet.
* Set the outcome of the action to editEmployee
* Once you start to reorganize your form your partial triggers will show up as red. This is due to the ::: actually having a meaning and not beeing random.

### Questions:

1. What is the meaning of :: in the ids?

## 2.5 Test the flow

You should now have a working flow where you can go in an edit employees by running the employee.jsf file and then clicking edit.
